webpackJsonp([9],{"2EoU":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("pxwZ"),n={data:function(){return{pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()}},name:"",date:"",phone:"",inputLength:"",dateValue:"",desc:"",brokerId:"",houseId:"",verCode:"",datestamp:"",pickerValue:"",startDate:new Date}},watch:{name:function(){var t=this.name.length,e=1.7*parseInt(t);this.$refs.name.style.width=e>0?e+"rem":"5rem"},phone:function(){var t=this.phone.length,e=parseInt(t);this.$refs.phone.style.width=e>0?e+"rem":"12rem"}},created:function(){null==this.$route.params.homes&&this.$router.push({name:"houseBuyDetail",params:{}})},components:{headTop:a("ra3+").a},mounted:function(){},methods:{openPicker:function(){this.$refs.picker.open()},handleConfirm:function(t){this.dateValue=this.getDate(t),console.log(this.dateValue)},getDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return a>=1&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s),e+"/"+a+"/"+s+" "+t.getHours()+":"+t.getMinutes()},getCode:function(){var t=this,e=60,a=this.$refs.button,n=setInterval(function(){e--,a.innerHTML=e+"秒",a.disabled=" disabled",0===e&&(a.disabled="",a.innerHTML="重新获取",clearInterval(n))},1e3);s.a.getCode(this.phone).then(function(e){console.log(e),0==e.data.success&&t.$toast({message:e.data.errorMessage,position:"bottom",duration:3e3})})},sendAppointment:function(){var t=this;if(this.name)if(this.dateValue){if(this.phone)if(/^((13|14|15|17|18)[0-9]{1}\d{8})$/.test(this.phone))if(this.verCode)if(this.desc){var e=Date.parse(new Date(this.dateValue));this.datestamp=e/1e3,console.log(this.datestamp);var a={cityId:this.$route.params.homes.cityId,houseId:this.$route.params.homes.id,phoneNum:this.phone,verCode:this.verCode,time:this.datestamp,desc:this.desc,brokerId:this.$route.params.homes.broker_id,userName:this.name};s.a.houseAppointment(a).then(function(e){console.log(e.data),e.data.success&&(console.log("提交成功"),t.$router.push({name:"lookHouseIndex",params:{}}))}).catch(function(t){console.log(t)})}else this.$toast({message:"请填写备注",position:"bottom",duration:3e3});else this.$toast({message:"请输入验证码",position:"bottom",duration:3e3});else this.$toast({message:"手机号号码格式错误",position:"bottom",duration:3e3});else this.$toast({message:"请输入手机号",position:"bottom",duration:3e3})}else this.$toast({message:"请选择看房时间",position:"bottom",duration:3e3});else this.$toast({message:"请输入看房人姓名",position:"bottom",duration:3e3})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"houseAppointment"},[a("h1",{staticClass:"nav-header"},[a("span",{staticClass:"go-back",on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"icon iconfont go-back-icon"},[t._v("")])]),t._v(" "),a("span",{staticClass:"header-title"},[t._v("\n      看房预约\n    ")])]),t._v(" "),a("div",{staticClass:"houseDetail"},[a("li",[a("div",[a("span",{staticClass:"span-top"},[t._v(t._s(t.$route.params.homes.title))]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"span-small"},[t._v(t._s(t.$route.params.homes.describe))]),t._v(" "),a("span",{staticClass:"span-bottom"},[a("span",{staticStyle:{color:"#e10000"}},[t._v(t._s(t.$route.params.homes.price))]),t._v("   "+t._s(t.$route.params.homes.avgprice))])]),t._v(" "),a("img",{attrs:{src:"http://image.qmango.com/hotelimg/dl1210/109490/109.jpeg"}}),a("br")])]),t._v(" "),a("div",{staticClass:"form"},[a("div",[a("div",{staticClass:"span-input centenr"},[a("span",{staticClass:"span-left "},[t._v("姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"name",staticClass:"input-right name",attrs:{placeholder:"看房人"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"span-input dark centenr"},[a("span",{staticClass:"span-left"},[t._v("看房时间：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dateValue,expression:"dateValue"}],ref:"date",staticClass:"input-right date dark",attrs:{placeholder:"请选择看房时间"},domProps:{value:t.dateValue},on:{click:t.openPicker,input:function(e){e.target.composing||(t.dateValue=e.target.value)}}}),t._v(" "),a("i",{staticClass:"icon iconfont go-back-icon i-right"},[t._v("")])]),t._v(" "),a("div",{staticClass:"span-input centenr"},[a("span",{staticClass:"span-left"},[t._v("联系方式：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],ref:"phone",staticClass:"input-right phone",attrs:{placeholder:"请填写联系方式",maxlength:"11"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"span-input dark centenr"},[a("span",{staticClass:"span-left"},[t._v("验证码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.verCode,expression:"verCode"}],staticClass:"yan dark",domProps:{value:t.verCode},on:{input:function(e){e.target.composing||(t.verCode=e.target.value)}}}),t._v(" "),a("button",{ref:"button",staticClass:"input-right button",on:{click:function(e){t.getCode()}}},[t._v("发送验证码")]),t._v(" "),a("br"),t._v(" "),t._m(0)]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"span-input dark noteDiv"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticClass:"span-left dark",attrs:{placeholder:"请填写备注"},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"datePicker"},[a("mt-datetime-picker",{ref:"picker",attrs:{type:"datetime",startDate:t.startDate,yearFormat:"{value}",monthFormat:"{value}月",dateFormat:"{value}日",hourFormat:"{value}时",minuteFormat:"{value}分"},on:{confirm:t.handleConfirm}})],1),t._v(" "),a("div",{staticClass:"button-bottom",on:{click:function(e){t.sendAppointment()}}},[t._v("提交")])]),t._v(" "),a("keep-alive",[a("router-view")],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"xh"},[e("span",[this._v("_")]),e("span",[this._v("_")]),e("span",[this._v("_")]),e("span",[this._v("_")]),e("span",[this._v("_")]),e("span",[this._v("_")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"span-input centenr"},[e("span",{staticClass:"span-left"},[this._v("备注：")]),e("br")])}]};var o=a("VU/8")(n,i,!1,function(t){a("eLfG")},"data-v-ee139da4",null);e.default=o.exports},eLfG:function(t,e){}});
//# sourceMappingURL=9.d5c27a5bc3e5e3b72af5.js.map