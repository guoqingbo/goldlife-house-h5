webpackJsonp([21],{Mxmr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=t("pxwZ"),i=t("ra3+"),a=t("ps6j"),r={data:function(){return{type:"tab",isSell:!0,isRent:!1,center:{lng:116.40387397,lat:39.91488908},imgHouseAttr:["","",""],title:"",addressDetail:"",address:"",buildYear:"",builds:"",sellList:[],rentList:[],communityAround:[],attentionStatus:"关注",houseLists:[],houseType:this.$route.params.houseType?this.$route.params.houseType:this.$store.state.activeInfo.houseType,filterType:"",orderFilter:{1:[{orderColumn:"id",orderBy:"desc",describe:"最新发布"},{orderColumn:"price",orderBy:"asc",describe:"总价从低到高"},{orderColumn:"price",orderBy:"desc",describe:"总价从高到底"},{orderColumn:"avgprice",orderBy:"asc",describe:"单价从低到高"},{orderColumn:"buildarea",orderBy:"desc",describe:"面积从大到小"}],2:[{orderColumn:"id",orderBy:"desc",describe:"最新发布"},{orderColumn:"price",orderBy:"asc",describe:"租金从低到高"},{orderColumn:"price",orderBy:"desc",describe:"租金从高到底"}]},houseTypeDetail:{1:"houseBuyDetail",2:"houseRentDetail",3:"villageDetail"},houseParams:{1:{cityId:"hz",communityId:"",areaIds:"",priceMin:"",priceMax:"",filterIds:[],pageSize:10,pageIndex:1,orderBy:"",orderColumn:""},2:{cityId:"hz",communityId:"",areaIds:"",priceMin:"",priceMax:"",filterIds:[],pageSize:10,pageIndex:1,orderBy:"",orderColumn:""}},isLoadAll:!1,loading:!1}},created:function(){},components:{headTop:i.a,houseItem:a.a},mounted:function(){this.menu(),this.gethouseLists()},methods:{opentFilter:function(e){this.filterType?this.filterType="":this.filterType=e},setOrderValue:function(e,s){this.houseParams[this.houseType].orderBy=s.orderBy,this.houseParams[this.houseType].orderColumn=s.orderColumn,this.gethouseLists(),this.filterType=""},menu:function(){window.scrollTo(0,0)},gethouseLists:function(e){var s=this;if(e||(this.houseParams[this.houseType].pageIndex=1),this.houseParams[this.houseType].communityId=this.$route.params.id?this.$route.params.id:this.$store.state.activeInfo.blockId,1==this.houseType){var t=this.houseParams[this.houseType];t.openId=this.$route.query?this.$route.query.openId:"",t.code=this.$route.query.code?this.$route.query.code:"",console.log(t),o.a.getSellHouseList(t).then(function(t){t.data.success?(s.recomment=t.data.result.recomment,e?(s.houseLists=s.houseLists.concat(t.data.result.list),t.data.result.list.length<s.houseParams[s.houseType].pageSize?(s.loading=!0,s.isLoadAll=!0):(s.loading=!1,s.isLoadAll=!1),console.log(s.houseLists)):(s.houseLists=t.data.result.list,t.data.result.list.length<s.houseParams[s.houseType].pageSize?(s.loading=!0,s.isLoadAll=!0):(s.loading=!1,s.isLoadAll=!1)),s.houseLists.length>0&&(s.title=s.houseLists[0].block_name)):s.$toast({message:t.data.errorMessage,position:"bottom",duration:3e3})}).catch(function(e){s.$toast({message:e.data.errorMessage,position:"bottom",duration:3e3})})}else if(2==this.houseType){var i=this.houseParams[this.houseType];console.log(i),o.a.getRentHouseList(i).then(function(t){console.log(t),t.data.success?(e?(s.houseLists=s.houseLists.concat(t.data.result.list),t.data.result.list.length<s.houseParams[s.houseType].pageSize?(s.loading=!0,s.isLoadAll=!0):(s.loading=!1,s.isLoadAll=!1)):(s.houseLists=t.data.result.list,t.data.result.list.length<s.houseParams[s.houseType].pageSize?(s.loading=!0,s.isLoadAll=!0):(s.loading=!1,s.isLoadAll=!1)),s.houseLists.length>0&&(s.title=s.houseLists[0].block_name)):s.$toast({message:t.data.errorMessage,position:"bottom",duration:3e3})}).catch(function(e){s.$toast({message:e.data.errorMessage,position:"bottom",duration:3e3})})}this.$store.commit("setActiveInfo",{blockId:this.houseParams[this.houseType].communityId,houseType:this.houseType})},loadBottom:function(){this.houseParams[this.houseType].pageIndex++,console.log(this.houseParams[this.houseType].pageIndex),this.gethouseLists(!0),this.$refs.loadmore.onBottomLoaded()},loadMore:function(){this.loading=!0,this.houseParams[this.houseType].pageIndex++,console.log(this.houseParams[this.houseType].pageIndex),this.gethouseLists(!0)}}},l={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"villageMore"},[t("h1",{staticClass:"nav-header"},[t("span",{staticClass:"go-back",on:{click:function(s){e.$router.go(-1)}}},[t("i",{staticClass:"icon iconfont go-back-icon"},[e._v("")])]),e._v(" "),t("span",{staticClass:"header-title"},[e._v(e._s(this.title))])]),e._v(" "),t("div",{staticClass:"search"},[t("span",{staticClass:"left"},[e._v(e._s(this.title))]),e._v(" "),t("span",{staticClass:"right",on:{click:function(s){e.opentFilter("filterOrder")}}},[e._v("综合排序\n        "),t("i",{staticClass:"icon iconfont",class:{"select-active-icon":"filterOrder"==e.filterType}},[e._v("")])])]),e._v(" "),e.houseLists.length>0?t("div",[t("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"house-list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"0"}},e._l(e.houseLists,function(s){return t("li",{key:s.id,staticClass:"house-item clear"},[t("router-link",{attrs:{to:{name:e.houseTypeDetail[e.houseType],params:{cityId:"hz",houseId:s.id,userType:"customer",houseType:e.houseType}}}},[t("house-item",{attrs:{item:s,houseType:e.houseType}})],1)],1)})),e._v(" "),e.isLoadAll?e._e():t("p",{staticClass:"loading-more"},[e._m(0),t("span",{staticClass:"loading-more-text"},[e._v("加载更多")])]),e._v(" "),e.isLoadAll?t("p",{staticClass:"loading-more"},[e._v("没有更多数据了！")]):e._e()]):e._e(),e._v(" "),"filterOrder"==e.filterType?t("div",{staticClass:"filter-order"},[t("div",{staticClass:"clear"},[t("ul",{staticClass:"filter-order-ul left"},e._l(e.orderFilter[e.houseType],function(s,o){return t("li",{class:{"select-font-active":e.houseParams[e.houseType].orderColumn==s.orderColumn&&e.houseParams[e.houseType].orderBy==s.orderBy},on:{click:function(t){e.setOrderValue(t,s)}}},[e._v("\n          "+e._s(s.describe)+"\n        ")])}))]),e._v(" "),t("div",{staticClass:"filter-mask",on:{click:function(s){e.opentFilter("district")},touchmove:function(e){e.preventDefault()}}})]):e._e(),e._v(" "),t("keep-alive",[t("router-view")],1)],1)},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("span",{staticClass:"loading-more-span"},[s("i",{staticClass:"icon iconfont loading-more-icon"},[this._v("")])])}]};var n=t("VU/8")(r,l,!1,function(e){t("ediq")},"data-v-4be4ef75",null);s.default=n.exports},ediq:function(e,s){}});
//# sourceMappingURL=21.cc0a07887c67acc7ed0e.js.map