webpackJsonp([4],{JhHb:function(t,e,s){s("SAFe");var a=s("AKd3").Object;t.exports=function(t,e,s){return a.defineProperty(t,e,s)}},SAFe:function(t,e,s){var a=s("FITv");a(a.S+a.F*!s("sjnA"),"Object",{defineProperty:s("lIiZ").f})},YTJ3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("a3Yh"),i=s.n(a),l=s("pxwZ"),n=s("ra3+"),o=s("jkKj"),r=s.n(o),c=s("oefm"),d={data:function(){var t;return t={type:"tab",address_detail:null,center:{lng:116.40387397,lat:39.91488908},arrItem:[{imgUrl:"http://image.qmango.com/hotelimg/dl1210/109490/109.jpeg"},{imgUrl:"http://image.qmango.com/hotelimg/dl1210/125708/181.jpeg"},{imgUrl:"http://image.qmango.com/hotelimg/dl1210/119297/793.jpeg"}],id:"",isSell:!0,isRent:!1},i()(t,"center",{lng:120.12,lat:30.16}),i()(t,"imgHouseAttr",[]),i()(t,"title",""),i()(t,"addressDetail",""),i()(t,"address",""),i()(t,"buildYear",""),i()(t,"builds",""),i()(t,"sellList",[]),i()(t,"rentList",[]),i()(t,"communityAround",[]),i()(t,"attentionStatus",!1),i()(t,"cityId","hz"),i()(t,"blockId",this.$route.params.blockId?this.$route.params.blockId:this.$store.state.activeInfo.blockId),i()(t,"userType","customer"),i()(t,"houseType",this.$route.params.houseType?this.$route.params.houseType:this.$store.state.activeInfo.houseType),i()(t,"address",""),t},created:function(){this.menu(),this.getCommunityDetail(),this.$store.commit("setActiveInfo",{blockId:this.blockId,houseType:this.houseType})},components:{headTop:n.a},mounted:function(){this.ready()},methods:{getCommunityDetail:function(){var t=this,e={blockId:this.blockId,city:this.cityId,userType:this.userType,houseType:this.houseType};l.a.getCommunityDetail(e).then(function(e){if(e.data.success){console.log("小区"),console.log(e.data.result);var s=e.data.result;t.id=s.id,t.sellList=s.houseInblock.sell.lists,t.rentList=s.houseInblock.rent.lists,t.sellList.length<1&&t.isSell&&(t.$refs.ulDisplay.style.display="none",t.$refs.sameSell.style.marginTop="2rem"),t.isRent&&t.rentList.length<1&&(t.$refs.ulDisplay.style.display="none",t.$refs.sameSell.style.marginTop="2rem"),console.log("在售列表"),console.log(t.sellList),console.log("在租列表"),console.log(t.rentList),t.communityAround=s.communityAround,t.address=s.disrictName+"区-"+s.streetName,t.buildYear=s.build_date,t.builds=s.build_num,t.title=s.cmt_name,t.addressDetail=s.address.split("（")[0],t.cityId=s.cityId,console.log(t.id),console.log("关注状态"),console.log(s.attentionState),"0"==s.attentionState?t.attentionStatus=!1:"1"==s.attentionState&&(t.attentionStatus=!0),t.center.lng=s.b_map_x,t.center.lat=s.b_map_y,t.address=s.disrictName+","+s.streetName,t.resetMap(),t.$nextTick(function(){new c.a(".swiper-container",{loop:!0,autoplay:{delay:3e3},pagination:{el:".swiper-pagination",type:"fraction"}})})}else t.$message.error(e.data.errorMessage)}).catch(function(e){t.$message.error("小区详情"+e.data.errorMessage)})},menu:function(){window.scrollTo(0,0)},clickSell:function(){this.isSell=!0,this.isRent=!1,this.sellList.length>3?(this.$refs.ulDisplay.style.display="",this.$refs.sameSell.style.marginTop="16rem",this.$refs.sameSell.style.backgroundColor="#f5f5f5"):this.sellList.length>0&&this.sellList.length<4?(this.$refs.ulDisplay.style.display="",this.$refs.sameSell.style.marginTop="12rem",this.$refs.sameSell.style.backgroundColor="#fff"):(this.$refs.ulDisplay.style.display="none",this.$refs.sameSell.style.marginTop="2rem",this.$refs.sameSell.style.backgroundColor="#f5f5f5")},clickRent:function(){this.isSell=!1,this.isRent=!0,this.rentList.length>3?(this.$refs.ulDisplay.style.display="",this.$refs.sameSell.style.marginTop="16rem",this.$refs.sameSell.style.backgroundColor="#f5f5f5"):this.rentList.length>0&&this.rentList.length<4?(this.$refs.ulDisplay.style.display="",this.$refs.sameSell.style.marginTop="12rem",this.$refs.sameSell.style.backgroundColor="#fff"):(this.$refs.ulDisplay.style.display="none",this.$refs.sameSell.style.marginTop="2rem",this.$refs.sameSell.style.backgroundColor="#f5f5f5")},clkAttention:function(){var t=this;l.a.isLogin().then(function(e){if(e.data.success){if(console.log(e),!t.attentionStatus){var s={cityId:t.cityId,businessNum:t.id,businessType:"小区",sysType:1,attentionState:1};return console.log(s),void l.a.attention(s).then(function(e){console.log(e.data),e.data.success&&(console.log("关注成功"),t.attentionStatus=!0)}).catch(function(t){console.log(t)})}if(t.attentionStatus){var a={cityId:t.cityId,businessNum:t.id,businessType:"小区",sysType:1,attentionState:0};l.a.attention(a).then(function(e){console.log(e.data),e.data.success&&(console.log("取消关注"),t.attentionStatus=!1)}).catch(function(t){console.log(t)})}}})},getOtherVillage:function(t){this.blockId=t,this.getCommunityDetail(),this.menu()},ready:function(){var t=new r.a.Map("allmap");window.map=t;var e=new r.a.Point(this.center.lng,this.center.lat),s=new r.a.Marker(e);t.addOverlay(s),t.disableDragging(),t.centerAndZoom(e,16)},resetMap:function(){var t=new r.a.Point(this.center.lng,this.center.lat),e=new r.a.Marker(t);map.addOverlay(e),map.disableDragging(),map.centerAndZoom(t,16),map.panTo(t);var s=new r.a.Label(this.address,{position:t,offset:new r.a.Size(-26,0)});s.setStyle({backgroundColor:"#fff",padding:"0.5rem",border:"",fontSize:".1rem"}),map.addOverlay(s)}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"villageDetail"},[a("h1",{staticClass:"nav-header"},[a("span",{staticClass:"go-back",on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"icon iconfont go-back-icon"},[t._v("")])]),t._v(" "),a("span",{staticClass:"header-title"},[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"imgDiv"},[a("router-link",{attrs:{to:{name:"imgIncrease",params:{imgs:t.imgHouseAttr,title:t.title}}}},[t.imgHouseAttr.length>0?a("div",{staticClass:"swiper-container"},[a("div",{staticClass:"swiper-wrapper"},t._l(t.imgHouseAttr,function(t){return a("div",{staticClass:"swiper-slide"},[a("img",{attrs:{src:t||s("K2Dr")}})])})),t._v(" "),a("div",{staticClass:"swiper-pagination"})]):a("div",[a("img",{attrs:{src:s("K2Dr")}})])])],1),t._v(" "),a("div",{staticClass:"house-content"},[a("h2",{staticClass:"villageName"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"div-houseDes"},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-row",{staticClass:"el-houseDes"},[a("p",{staticClass:"des"},[t._v(t._s(t.addressDetail))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"el-houseDes"},[t.attentionStatus?a("span",{on:{click:function(e){t.clkAttention()}}},[t.attentionStatus?a("i",{staticClass:"icon iconfont right"},[t._v("")]):t._e()]):a("span",{on:{click:function(e){t.clkAttention()}}},[a("i",{staticClass:"icon iconfont xl right"},[t._v("")])])])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"divide"}),t._v(" "),a("div",{staticClass:"detailDes"},[a("p",[t._v("小区简介")]),t._v(" "),a("br"),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-row",{staticClass:"el-detailDes"},[a("p",[t._v("位置： "),a("span",{staticClass:"data-show"},[t._v(t._s(t.address))])])]),t._v(" "),a("el-row",{staticClass:"el-detailDes"},[a("p",[t._v("栋数： "),a("span",{staticClass:"data-show"},[t._v(t._s(t.builds)+"栋")])])])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-row",{staticClass:"el-detailDes"},[a("p",[t._v("年代： "),a("span",{staticClass:"data-show"},[t._v(t._s(t.buildYear)+"年")])])])],1)],1)],1),t._v(" "),a("div",{staticClass:"homeMap"},[a("router-link",{attrs:{to:{name:"mapIncrease",params:{x:t.center.lng,y:t.center.lat}}}},[a("div",{staticClass:"allmap",attrs:{id:"allmap"}})])],1),t._v(" "),a("div",{staticClass:"sameArea"},[a("el-row",[a("el-col",{attrs:{span:16}},[a("p",[t._v("同小区房源")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("p",{class:{"class-color":t.isRent},on:{click:function(e){t.clickRent()}}},[t._v("在租")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("p",{class:{"class-color":t.isSell},on:{click:function(e){t.clickSell()}}},[t._v("在售")])])],1),t._v(" "),a("ul",{ref:"ulDisplay",staticClass:"category-head"},[t._l(t.sellList,function(e){return t.isSell?a("li",[a("router-link",{attrs:{to:{name:"houseBuyDetail",params:{cityId:t.cityId,houseId:e.id,userType:t.userType,houseType:t.houseType}}}},[a("img",{attrs:{src:e.pic?e.pic:s("16yI")}}),a("br"),t._v(" "),a("p",[t._v(t._s(e.room_type)+"|"+t._s(e.buildarea)+"|"+t._s(e.forward))]),t._v(" "),a("p",[a("span",{staticStyle:{color:"#e10000"}},[t._v(t._s(e.price))]),t._v("   "+t._s(e.avgprice))])])],1):t._e()}),t._v(" "),t._l(t.rentList,function(e){return t.isRent?a("li",[a("router-link",{attrs:{to:{name:"houseRentDetail",params:{cityId:t.cityId,houseId:e.id,userType:t.userType,houseType:t.houseType}}}},[a("img",{attrs:{src:e.pic?e.pic:s("16yI")}}),a("br"),t._v(" "),a("p",[t._v(t._s(e.room_type)+"|"+t._s(e.buildarea)+"|"+t._s(e.forward))]),t._v(" "),a("p",[a("span",{staticStyle:{color:"#e10000"}},[t._v(t._s(e.price))])])])],1):t._e()})],2)],1),t._v(" "),a("router-link",{attrs:{to:{name:"villageMore",params:{more:t.isSell?t.sellList:t.rentList,villageName:t.title,id:t.id,houseType:t.houseType}}}},[a("div",{ref:"sameSell",staticClass:"sameSells"},[t.isRent&&t.rentList.length>3||t.isSell&&t.sellList.length>3?a("span",[t._v("查看更多")]):a("span",[t.isRent&&t.rentList.length<1?a("span",[t._v("暂无在租房源")]):t._e(),t._v(" "),t.isSell&&t.sellList.length<1?a("span",[t._v("暂无在售房源")]):t._e()])])]),t._v(" "),a("div",{staticClass:"divide2"}),t._v(" "),t.communityAround.length>0?a("div",{staticClass:"sameArea"},[a("p",[t._v("周边小区")]),t._v(" "),a("ul",{staticClass:"category-head"},t._l(t.communityAround,function(e){return a("li",{on:{click:function(s){t.getOtherVillage(e.id)}}},[a("img",{attrs:{src:e.surface_img?e.surface_img:s("16yI")}}),a("br"),t._v(" "),a("p",{staticStyle:{color:"#885D24"}},[t._v(t._s(e.build_date)+"年建")]),t._v(" "),a("p",[t._v(t._s(e.cmt_name))]),t._v(" "),a("p",{staticClass:"p-bottom"},[a("span",{staticStyle:{color:"#e10000"}},[t._v(t._s(e.averprice)+"元/平")])])])}))]):t._e(),t._v(" "),t.communityAround.length>0?a("div",{staticClass:"empty"}):a("div",{staticClass:"empty2"})],1),t._v(" "),a("keep-alive",[a("router-view")],1)],1)},staticRenderFns:[]};var p=s("vSla")(d,u,!1,function(t){s("moIF")},"data-v-0da65add",null);e.default=p.exports},a3Yh:function(t,e,s){"use strict";e.__esModule=!0;var a,i=s("liLe"),l=(a=i)&&a.__esModule?a:{default:a};e.default=function(t,e,s){return e in t?(0,l.default)(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},liLe:function(t,e,s){t.exports={default:s("JhHb"),__esModule:!0}},moIF:function(t,e){}});
//# sourceMappingURL=4.0d9a3087922ca93a5647.js.map