{"version":3,"sources":["webpack:///src/page/houseDetail/houseAppointment.vue","webpack:///./src/page/houseDetail/houseAppointment.vue?d5c7","webpack:///./src/page/houseDetail/houseAppointment.vue"],"names":["houseAppointment","data","pickerOptions0","disabledDate","time","getTime","Date","now","name","date","phone","inputLength","dateValue","desc","brokerId","houseId","verCode","datestamp","pickerValue","startDate","setHours","getHours","isOriginHei","screenHeight","document","documentElement","clientHeight","originHeight","pic","watch","text_length","this","length","current_width","parseInt","$refs","style","width","val","created","console","log","$route","params","homes","$router","push","picList","img","$store","state","userInfo","loginName","components","headTop","mounted","self","window","onresize","methods","openPicker","picker","open","handleConfirm","getDate","year","getFullYear","month","getMonth","strDate","hour","minutes","getMinutes","getCode","_this","num","elementButton","button","timer","setInterval","innerHTML","disabled","clearInterval","axios","then","res","success","$toast","message","errorMessage","position","duration","sendAppointment","_this2","test","timestamp2","parse","appointmentInfo","cityId","id","phoneNum","broker_id","userName","catch","response","houseDetail_houseAppointment","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","go","_v","_s","title","describe","staticStyle","color","price","avgprice","attrs","src","__webpack_require__","directives","rawName","value","expression","ref","placeholder","domProps","input","target","composing","maxlength","type","onkeyup","preventDefault","_m","yearFormat","monthFormat","dateFormat","hourFormat","minuteFormat","confirm","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.625142b13684be3c9323.js","sourcesContent":["<template>\r\n  <div class=\"houseAppointment\">\r\n    <!--<head-top goBack=\"true\"/>-->\r\n    <h1 class=\"nav-header\">\r\n      <span class=\"go-back\" @click=\"$router.go(-1)\"><i class=\"icon iconfont go-back-icon\">&#xe60f;</i></span>\r\n      <span class=\"header-title\">\r\n        看房预约\r\n      </span>\r\n\r\n    </h1>\r\n\r\n    <div class=\"houseDetail\">\r\n      <li>\r\n        <div>\r\n          <span class=\"span-top\">{{$route.params.homes.title}}</span>\r\n          <br>\r\n          <span class=\"span-small\">{{$route.params.homes.describe}}</span>\r\n          <span class=\"span-bottom\"><span style=\"color: #e10000\">{{$route.params.homes.price}}</span>&nbsp;&nbsp;&nbsp;{{$route.params.homes.avgprice}}</span>\r\n        </div>\r\n\r\n        <img :src=\"pic?pic:require('../../../static/bg_smallphotonormal@2x.png')\"><br/>\r\n      </li>\r\n    </div>\r\n    <div class=\"form\">\r\n      <div>\r\n        <div class=\"span-input centenr\">\r\n          <span class=\"span-left \">姓名：</span>\r\n          <input class=\"input-right name\" placeholder=\"看房人\" v-model=\"name\" ref=\"name\">\r\n        </div>\r\n        <div class=\"span-input dark centenr\" @click=\"openPicker\">\r\n          <span class=\"span-left\">看房时间：</span>\r\n          <input class=\"input-right date dark\" placeholder=\"请选择看房时间\" v-model=\"dateValue\" ref=\"date\" disabled=\"disabled\">\r\n          <i class=\"icon iconfont go-back-icon i-right\">&#xe6da;</i>\r\n        </div>\r\n        <div class=\"span-input centenr\">\r\n          <span class=\"span-left\">联系方式：</span>\r\n          <input class=\"input-right phone\" placeholder=\"请填写联系方式\" v-model=\"phone\" ref=\"phone\" maxlength=\"11\">\r\n        </div>\r\n        <div class=\"span-input dark centenr\">\r\n          <span class=\"span-left\">验证码：</span>\r\n          <input class=\"yan dark\" v-model=\"verCode\" maxlength=\"6\" type=\"number\" onkeyup=\"this.value=this.value.replace(/[^0-9-]+/,'');\" >\r\n          <button class=\"input-right button\" ref=\"button\" @click.prevent=\"getCode()\">发送验证码</button>\r\n          <br>\r\n          <span class=\"xh\"><span>_</span><span>_</span><span>_</span><span>_</span><span>_</span><span>_</span></span>\r\n        </div>\r\n        <div class=\"span-input centenr\">\r\n          <span class=\"span-left\">备注：</span><br>\r\n        </div>\r\n        <div class=\"span-input dark noteDiv\">\r\n          <textarea class=\"span-left dark\" placeholder=\"请填写备注\" v-model=\"desc\"></textarea>\r\n        </div>\r\n      </div>\r\n      <div class=\"datePicker\">\r\n        <mt-datetime-picker\r\n          type=\"datetime\"\r\n          ref=\"picker\"\r\n          @confirm=\"handleConfirm\"\r\n          :startDate=\"startDate\"\r\n          yearFormat=\"{value}\"\r\n          monthFormat=\"{value}月\"\r\n          dateFormat=\"{value}日\"\r\n          hourFormat=\"{value}时\"\r\n          minuteFormat=\"{value}分\"\r\n        >\r\n        </mt-datetime-picker>\r\n      </div>\r\n      <div class=\"button-bottom\" @click=\"sendAppointment()\" v-show=\"isOriginHei\">提交</div>\r\n    </div>\r\n\r\n    <keep-alive>\r\n      <router-view></router-view>\r\n    </keep-alive>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import api from '../../api/axios'\r\n  import headTop from '../../components/header/head'\r\n  //引入element组键（后续要去掉）\r\n\r\n\r\n  export default {\r\n    //参数\r\n    data() {\r\n      return {\r\n        pickerOptions0: {\r\n          disabledDate(time) {\r\n            return time.getTime() < Date.now();\r\n          }\r\n        },\r\n        name: '',\r\n        date: '',\r\n        phone: '',\r\n        inputLength: '',\r\n        dateValue: '',\r\n        desc: '',\r\n        brokerId: '',\r\n        houseId: '',\r\n        verCode: '',\r\n        datestamp: '',\r\n        pickerValue:'',\r\n        startDate: new Date(new Date().setHours(new Date().getHours()+1)),\r\n        isOriginHei: true,\r\n        screenHeight: document.documentElement.clientHeight,        //此处也可能是其他获取方法\r\n        originHeight: document.documentElement.clientHeight,\r\n        pic:'',\r\n      }\r\n    },\r\n    watch: {\r\n      name() {\r\n        var text_length = this.name.length;//获取当前文本框的长度\r\n        var current_width = parseInt(text_length) * 1.7;\r\n        if (current_width > 0) {\r\n          this.$refs.name.style.width = current_width + 'rem';\r\n        } else {\r\n          this.$refs.name.style.width = 5 + 'rem';\r\n        }\r\n      },\r\n      phone() {\r\n        var text_length = this.phone.length;//获取当前文本框的长度\r\n        var current_width = parseInt(text_length);\r\n        if (current_width > 0) {\r\n          this.$refs.phone.style.width = current_width + 'rem';\r\n        } else {\r\n          this.$refs.phone.style.width = 12 + 'rem';\r\n        }\r\n      },\r\n      screenHeight (val) {\r\n        if(this.originHeight > val + 100) {        //加100为了兼容华为的返回键\r\n          this.isOriginHei = false;\r\n        }else{\r\n          this.isOriginHei = true;\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      console.log(this.$route.params.homes)\r\n      if(this.$route.params.homes == null){\r\n        this.$router.push({ name:'home',params: { }});\r\n      }else{\r\n        var picList = this.$route.params.homes.img;\r\n        if(picList != null && picList.length>0){\r\n          this.pic = picList[0];\r\n        }\r\n        this.phone = this.$store.state.userInfo.loginName;\r\n      }\r\n\r\n    },\r\n    components: {\r\n      headTop,\r\n    },\r\n    mounted() {\r\n      let self = this;\r\n      window.onresize = function() {\r\n        return (function(){\r\n          self.screenHeight = document.documentElement.clientHeight;\r\n        })()\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      openPicker () {\r\n        this.$refs.picker.open()\r\n      },\r\n      handleConfirm (data) {\r\n        this.dateValue = this.getDate(data);   //获取的时间为时间戳，getdata是自己写的一个转换时间的方法\r\n        console.log(this.dateValue)\r\n      },\r\n      getDate(data){\r\n        var year = data.getFullYear();\r\n        var month = data.getMonth() + 1;\r\n        var strDate = data.getDate();\r\n        if (month >= 1 && month <= 9) {\r\n          month = \"0\" + month;\r\n        }\r\n        if (strDate >= 0 && strDate <= 9) {\r\n          strDate = \"0\" + strDate;\r\n        }\r\n        var hour = data.getHours();\r\n        if (hour >= 0 && hour <= 9) {\r\n          hour = \"0\" + hour;\r\n        }\r\n        var minutes = data.getMinutes();\r\n        if (minutes >= 0 && minutes <= 9) {\r\n          minutes = \"0\" + minutes;\r\n        }\r\n        var currentdate = year + '/' + month + '/' + strDate + ' ' + hour + ':' + minutes;\r\n        return currentdate;\r\n      },\r\n      getCode() {\r\n        var num = 60;\r\n        var elementButton = this.$refs.button;\r\n        var timer = setInterval(function () {\r\n          num--;\r\n          elementButton.innerHTML = num + '秒';\r\n          elementButton.disabled = ' disabled';\r\n          if (num === 0) {\r\n            elementButton.disabled = '';\r\n            elementButton.innerHTML = '重新获取';\r\n            clearInterval(timer)\r\n          }\r\n        }, 1000);\r\n        api.getCode(this.phone)\r\n          .then(res => {\r\n            console.log(res);\r\n            if (res.data.success == false) {\r\n              this.$toast({\r\n                message: res.data.errorMessage,\r\n                position: 'bottom',\r\n                duration: 3000\r\n              });\r\n            }\r\n          });\r\n      },\r\n\r\n      sendAppointment() {\r\n        if (!this.name) {\r\n          this.$toast({\r\n            message: '请输入看房人姓名',\r\n            position: 'bottom',\r\n            duration: 3000\r\n          });\r\n          return\r\n        }\r\n        if (!this.dateValue) {\r\n          this.$toast({\r\n            message: '请选择看房时间',\r\n            position: 'bottom',\r\n            duration: 3000\r\n          });\r\n          return\r\n        }\r\n        var reg = 11 && /^((13|14|15|17|18)[0-9]{1}\\d{8})$/;\r\n        if (!this.phone) {\r\n          this.$toast({\r\n            message: '请输入手机号',\r\n            position: 'bottom',\r\n            duration: 3000\r\n          });\r\n          return\r\n        } else if (!reg.test(this.phone)) {\r\n          this.$toast({\r\n            message: '手机号号码格式错误',\r\n            position: 'bottom',\r\n            duration: 3000\r\n          });\r\n          return\r\n        }\r\n        if (!this.verCode) {\r\n          this.$toast({\r\n            message: '请输入验证码',\r\n            position: 'bottom',\r\n            duration: 3000\r\n          });\r\n          return\r\n        }\r\n        if (!this.desc) {\r\n          this.$toast({\r\n            message: '请填写备注',\r\n            position: 'bottom',\r\n            duration: 3000\r\n          });\r\n          return\r\n        }\r\n        var timestamp2 = Date.parse(new Date(this.dateValue));\r\n        this.datestamp = timestamp2;\r\n        console.log(this.datestamp);\r\n        let appointmentInfo = {\r\n          cityId: this.$route.params.homes.cityId,\r\n          houseId: this.$route.params.homes.id,\r\n          phoneNum: this.phone,\r\n          verCode: this.verCode,\r\n          time: this.datestamp,\r\n          desc: this.desc,\r\n          brokerId: this.$route.params.homes.broker_id,\r\n          userName: this.name,\r\n        };\r\n        api.houseAppointment(appointmentInfo)\r\n          .then(res => {\r\n            console.log(res.data)\r\n            if (res.data.success) {\r\n              console.log('提交成功')\r\n              //跳转看房日程\r\n              this.$router.push({ name: 'lookHouseIndex', params: {}});\r\n            }\r\n          })\r\n          .catch(function (response) {\r\n            console.log(response)\r\n          });\r\n\r\n      },\r\n    }\r\n  }\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import '../../style/mixin';\r\n  @import \"../../../static/css/swiper.min.css\";\r\n\r\n  .houseAppointment{\r\n    font-size: 1.6rem;\r\n    /**导航*/\r\n    .nav-header {\r\n      position: relative;\r\n      background-color: #fff;\r\n      font-size: 1.6rem;\r\n      color: #424242;\r\n      height: 4.4rem;\r\n      line-height: 4.4rem;\r\n      //border-bottom: solid .6rem #f8f8f8;\r\n      .go-back {\r\n        position: absolute;\r\n        left: $contentPadding;\r\n      }\r\n      .go-back-icon {\r\n        font-size: 2rem;\r\n      }\r\n      .header-title {\r\n        display: inline-block;\r\n        width: 100%;\r\n        font-weight: bold;\r\n        text-align: center;\r\n      }\r\n    }\r\n\r\n    .houseDetail {\r\n      margin-top: 2rem;\r\n      height: 10rem;\r\n      margin-left: 1rem;\r\n      .span-top {\r\n        font-weight: bold;\r\n      }\r\n      .span-small {\r\n        font-size: 15px;\r\n        color: #A19FA2;\r\n      }\r\n      .span-bottom {\r\n        position: absolute;\r\n        top: 13.5rem;\r\n        left: 1rem;\r\n      }\r\n      div {\r\n        float: left;\r\n      }\r\n      img {\r\n        height: 9rem;\r\n        width: 12rem;\r\n        border-radius: 0.5rem;\r\n        position: absolute;\r\n        right: 2rem;\r\n      }\r\n    }\r\n\r\n    .form {\r\n      margin-top: 2rem;\r\n\r\n      .span-input {\r\n        height: 3.5rem;\r\n        padding-top: 0.6rem;\r\n        .center {\r\n          line-height: 3.5rem;\r\n        }\r\n        .span-left {\r\n          margin-left: 1rem;\r\n        }\r\n        .i-right {\r\n          position: absolute;\r\n          right: 1rem;\r\n          margin-top: 0.2rem;\r\n        }\r\n        .input-right {\r\n          position: absolute;\r\n          right: 1rem;\r\n          font-size: 1.6rem;\r\n        }\r\n        .el-date-editor {\r\n          border: none;\r\n        }\r\n        .name {\r\n          width: 5rem;\r\n        }\r\n        .phone {\r\n          width: 12rem;\r\n        }\r\n        .date {\r\n          margin-top: 0.2rem;\r\n          width: 15rem;\r\n        }\r\n        button {\r\n          color: #ffc16b;\r\n          background-color: #424242;\r\n          height: 3.4rem;\r\n          width: 10rem;\r\n          margin-top: -0.5rem;\r\n        }\r\n        .yan {\r\n          position: absolute;\r\n          width: 6rem;\r\n          right: 14rem;\r\n          z-index: 10;\r\n          font-size: 1.6rem;\r\n        }\r\n        .xh {\r\n          position: absolute;\r\n          top: 30.5rem;\r\n          right: 14rem;\r\n          span {\r\n            padding-left: 0.3rem;\r\n          }\r\n        }\r\n\r\n      }\r\n      .dark {\r\n        background-color: #f8f8f8;\r\n      }\r\n      .noteDiv {\r\n        height: 18rem;\r\n        width: 100%;\r\n      }\r\n      .button-bottom {\r\n        height: 4rem;\r\n        width: 100%;\r\n        position: absolute;\r\n        bottom: 0;\r\n        background-color: #424242;\r\n        text-align: center;\r\n        line-height: 4rem;\r\n        color: #ffc16b;\r\n        font-size: 2rem;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/houseDetail/houseAppointment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"houseAppointment\"},[_c('h1',{staticClass:\"nav-header\"},[_c('span',{staticClass:\"go-back\",on:{\"click\":function($event){_vm.$router.go(-1)}}},[_c('i',{staticClass:\"icon iconfont go-back-icon\"},[_vm._v(\"\")])]),_vm._v(\" \"),_c('span',{staticClass:\"header-title\"},[_vm._v(\"\\n      看房预约\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"houseDetail\"},[_c('li',[_c('div',[_c('span',{staticClass:\"span-top\"},[_vm._v(_vm._s(_vm.$route.params.homes.title))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"span-small\"},[_vm._v(_vm._s(_vm.$route.params.homes.describe))]),_vm._v(\" \"),_c('span',{staticClass:\"span-bottom\"},[_c('span',{staticStyle:{\"color\":\"#e10000\"}},[_vm._v(_vm._s(_vm.$route.params.homes.price))]),_vm._v(\"   \"+_vm._s(_vm.$route.params.homes.avgprice))])]),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.pic?_vm.pic:require('../../../static/bg_smallphotonormal@2x.png')}}),_c('br')])]),_vm._v(\" \"),_c('div',{staticClass:\"form\"},[_c('div',[_c('div',{staticClass:\"span-input centenr\"},[_c('span',{staticClass:\"span-left \"},[_vm._v(\"姓名：\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],ref:\"name\",staticClass:\"input-right name\",attrs:{\"placeholder\":\"看房人\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"span-input dark centenr\",on:{\"click\":_vm.openPicker}},[_c('span',{staticClass:\"span-left\"},[_vm._v(\"看房时间：\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dateValue),expression:\"dateValue\"}],ref:\"date\",staticClass:\"input-right date dark\",attrs:{\"placeholder\":\"请选择看房时间\",\"disabled\":\"disabled\"},domProps:{\"value\":(_vm.dateValue)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.dateValue=$event.target.value}}}),_vm._v(\" \"),_c('i',{staticClass:\"icon iconfont go-back-icon i-right\"},[_vm._v(\"\")])]),_vm._v(\" \"),_c('div',{staticClass:\"span-input centenr\"},[_c('span',{staticClass:\"span-left\"},[_vm._v(\"联系方式：\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phone),expression:\"phone\"}],ref:\"phone\",staticClass:\"input-right phone\",attrs:{\"placeholder\":\"请填写联系方式\",\"maxlength\":\"11\"},domProps:{\"value\":(_vm.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phone=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"span-input dark centenr\"},[_c('span',{staticClass:\"span-left\"},[_vm._v(\"验证码：\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.verCode),expression:\"verCode\"}],staticClass:\"yan dark\",attrs:{\"maxlength\":\"6\",\"type\":\"number\",\"onkeyup\":\"this.value=this.value.replace(/[^0-9-]+/,'');\"},domProps:{\"value\":(_vm.verCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.verCode=$event.target.value}}}),_vm._v(\" \"),_c('button',{ref:\"button\",staticClass:\"input-right button\",on:{\"click\":function($event){$event.preventDefault();_vm.getCode()}}},[_vm._v(\"发送验证码\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"span-input dark noteDiv\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.desc),expression:\"desc\"}],staticClass:\"span-left dark\",attrs:{\"placeholder\":\"请填写备注\"},domProps:{\"value\":(_vm.desc)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.desc=$event.target.value}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"datePicker\"},[_c('mt-datetime-picker',{ref:\"picker\",attrs:{\"type\":\"datetime\",\"startDate\":_vm.startDate,\"yearFormat\":\"{value}\",\"monthFormat\":\"{value}月\",\"dateFormat\":\"{value}日\",\"hourFormat\":\"{value}时\",\"minuteFormat\":\"{value}分\"},on:{\"confirm\":_vm.handleConfirm}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOriginHei),expression:\"isOriginHei\"}],staticClass:\"button-bottom\",on:{\"click\":function($event){_vm.sendAppointment()}}},[_vm._v(\"提交\")])]),_vm._v(\" \"),_c('keep-alive',[_c('router-view')],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"xh\"},[_c('span',[_vm._v(\"_\")]),_c('span',[_vm._v(\"_\")]),_c('span',[_vm._v(\"_\")]),_c('span',[_vm._v(\"_\")]),_c('span',[_vm._v(\"_\")]),_c('span',[_vm._v(\"_\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"span-input centenr\"},[_c('span',{staticClass:\"span-left\"},[_vm._v(\"备注：\")]),_c('br')])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-4e52cc12\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/page/houseDetail/houseAppointment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e52cc12\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./houseAppointment.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./houseAppointment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./houseAppointment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e52cc12\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./houseAppointment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4e52cc12\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/houseDetail/houseAppointment.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}